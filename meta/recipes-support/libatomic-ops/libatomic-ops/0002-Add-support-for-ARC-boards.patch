From 6860399c4398868b12a6d6a0f12cee0a17f976be Mon Sep 17 00:00:00 2001
From: Evgeniy Didin <Evgeniy.Didin@synopsys.com>
Date: Mon, 10 Sep 2018 15:03:30 +0300
Subject: [PATCH] Add support for ARC boards (use generic code)

Signed-off-by: Evgeniy Didin <Evgeniy.Didin@synopsys.com>
---
 src/Makefile.am                  |  1 +
 src/atomic_ops.h                 |  3 +++
 src/atomic_ops/sysdeps/gcc/arc.h | 14 ++++++++++++++
 3 files changed, 18 insertions(+)
 create mode 100644 src/atomic_ops/sysdeps/gcc/arc.h

diff --git a/src/Makefile.am b/src/Makefile.am
index cc4bde7..d7af037 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -91,6 +91,7 @@ nobase_private_HEADERS = atomic_ops/ao_version.h \
           atomic_ops/sysdeps/gcc/m68k.h \
           atomic_ops/sysdeps/gcc/mips.h \
           atomic_ops/sysdeps/gcc/nios2.h \
+          atomic_ops/sysdeps/gcc/arc.h \
           atomic_ops/sysdeps/gcc/powerpc.h \
           atomic_ops/sysdeps/gcc/s390.h \
           atomic_ops/sysdeps/gcc/sh.h \
diff --git a/src/atomic_ops.h b/src/atomic_ops.h
index 03f82a6..78152fb 100644
--- a/src/atomic_ops.h
+++ b/src/atomic_ops.h
@@ -299,6 +299,9 @@
 # if defined(__nios2__)
 #   include "atomic_ops/sysdeps/gcc/nios2.h"
 # endif /* __nios2__ */
+# if defined(__arc__)
+#   include "atomic_ops/sysdeps/gcc/arc.h"
+# endif /* __arc__ */
 # if defined(__powerpc__) || defined(__ppc__) || defined(__PPC__) \
      || defined(__powerpc64__) || defined(__ppc64__) \
      || defined(_ARCH_PPC)
diff --git a/src/atomic_ops/sysdeps/gcc/arc.h b/src/atomic_ops/sysdeps/gcc/arc.h
new file mode 100644
index 0000000..a1581bd
--- /dev/null
+++ b/src/atomic_ops/sysdeps/gcc/arc.h
@@ -0,0 +1,14 @@
+/*
+ * Copyright (C) 2016 Marek Vasut <marex@denx.de>
+ *
+ * THIS MATERIAL IS PROVIDED AS IS, WITH ABSOLUTELY NO WARRANTY EXPRESSED
+ * OR IMPLIED. ANY USE IS AT YOUR OWN RISK.
+ *
+ * Permission is hereby granted to use or copy this program
+ * for any purpose, provided the above notices are retained on all copies.
+ * Permission to modify the code and to distribute modified code is granted,
+ * provided the above notices are retained, and a notice that the code was
+ * modified is included with the above copyright notice.
+ */
+
+#include "generic.h"
-- 
2.16.2

